{% extends "base.html" %}

{% block title %}Plateforme Technique{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/plateforme.css') }}">
{% endblock %}

{% block content %}
<div class="page-title">
    <h1>Plateforme Technique</h1>
    <p>Gestion des équipements du laboratoire.</p>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="card-title">Liste des équipements</h2>
        <a href="{{ url_for('add_plateforme') }}" class="btn btn-primary"><i class="fas fa-plus"></i> Ajouter un équipement</a>
    </div>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Nom de l'équipement</th>
                    <th>Coût / jour</th>
                    <th>Pers. requises</th>
                    <th>Habilitations requises</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for equipement in equipements %}
                <tr>
                    <td>{{ equipement.nom }}</td>
                    <td>{{ "%.2f"|format(equipement.cout_journalier) }} €</td>
                    <td>{{ equipement.nb_personnes_necessaires }}</td>
                    <td>
                        {% for hab in equipement.habilitations_requises %}
                            <span class="badge badge-habilitation">{{ hab.nomHab }}</span>
                        {% else %}
                            <span class="text-muted">Aucune</span>
                        {% endfor %}
                    </td>
                    <td><span class="badge badge-{{ equipement.statut_class }}">{{ equipement.statut }}</span></td>
                    <td class="actions">
                        <a href="{{ url_for('edit_plateforme', equipement_id=equipement.idPl) }}" class="btn btn-sm btn-info"><i class="fas fa-edit"></i> Modifier</a>
                        <a href="{{ url_for('delete_plateforme', equipement_id=equipement.idPl) }}" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i> Supprimer</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}